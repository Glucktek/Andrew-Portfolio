# Architecture and Component System

## Application Architecture

### Astro Islands Architecture

Voyager leverages Astro's Islands Architecture for optimal performance:

- **Static-First**: Pages are statically generated by default
- **Selective Hydration**: Only interactive components are hydrated with JavaScript
- **Framework Agnostic**: Can mix React, Vue, Svelte, or vanilla JS components
- **Zero JS by Default**: No JavaScript shipped unless explicitly needed

### Component Hierarchy

```
BaseLayout (Root)
├── BaseHead (SEO, Meta, Scripts)
├── Navigation Components
│   ├── Header
│   ├── MobileNav
│   └── LanguageSelect
├── Page Content (Slots)
│   ├── Hero Components
│   ├── Content Sections
│   └── Interactive Islands (React)
└── Footer
```

## Layout System

### Primary Layouts

#### BaseLayout.astro
The root layout component that wraps all pages:
- HTML document structure
- Global CSS imports
- Theme initialization
- View transitions (optional)
- Analytics integration points

#### Specialized Layouts
- **BlogLayoutCentered**: Centered blog post layout with navigation
- **BlogLayoutSidebar**: Blog layout with table of contents sidebar
- **ProjectLayout**: Project showcase with image galleries
- **ResumeLayout**: Professional resume presentation
- **BlogIndexGrid**: Grid-based blog listing layouts

### Layout Props and Configuration

```typescript
interface LayoutProps {
  title: string;
  description: string;
  image?: string;
  noindex?: boolean;
  ogType?: "website" | "article";
}
```

## Component Architecture

### Component Categories

#### Core UI Components
- **Button**: Primary, secondary, and utility button variants
- **SiteLogo**: Configurable logo component with dark/light modes
- **ThemeToggle**: Dark/light mode switcher with persistence
- **LanguageSelect**: i18n language switching component

#### Content Components
- **Hero Sections**: Multiple hero layouts (centered, split, minimal)
- **PostCard**: Blog post preview cards with metadata
- **ProjectShowcase**: Project cards with technology badges
- **CategoryBadge**: Content categorization and filtering
- **ShareButtons**: Social media sharing integration

#### Form Components
- **ContactForm**: Contact form with validation
- **FilterButton**: Content filtering and sorting

#### Navigation Components
- **Header**: Main site navigation with responsive design
- **MobileNav**: Mobile-optimized navigation drawer
- **Footer**: Site footer with links and information
- **TableOfContents**: Auto-generated TOC for long content

#### SEO Components
- **SEO**: Meta tags and structured data generation
- **HrefLang**: Multi-language SEO support

### Component Conventions

#### File Organization
```
src/components/
├── [category]/
│   ├── ComponentName.astro
│   ├── ComponentVariant.astro
│   └── index.ts (re-exports)
└── shared/
    └── CommonComponent.astro
```

#### Naming Conventions
- **Components**: PascalCase (e.g., `HeroCentered.astro`)
- **Files**: kebab-case (e.g., `hero-centered.astro`)
- **Props**: camelCase with TypeScript interfaces
- **CSS Classes**: Tailwind utilities with logical grouping

#### Component Props Pattern
```astro
---
interface Props {
  title: string;
  description?: string;
  variant?: "primary" | "secondary";
  size?: "sm" | "md" | "lg";
}

const { 
  title, 
  description, 
  variant = "primary", 
  size = "md" 
} = Astro.props;
---
```

### Interactive Components (React Islands)

#### When to Use React
Use React components for:
- Complex state management
- Real-time interactions
- Form validation
- Animation control
- Third-party integrations

#### React Component Integration
```astro
---
// In Astro component
import InteractiveComponent from '@components/InteractiveComponent';
---

<InteractiveComponent client:load />
<!-- Hydration directives:
  client:load - Hydrate immediately
  client:idle - Hydrate when browser is idle
  client:visible - Hydrate when visible
  client:media - Hydrate based on media query
-->
```

## Styling System

### Tailwind CSS Architecture

#### Configuration Structure
- **Base Styles**: Reset, typography, and foundational styles
- **Components**: Reusable component classes
- **Utilities**: Atomic utility classes
- **Custom Theme**: Brand colors, fonts, and spacing

#### CSS Organization
```
src/styles/
├── global.css          # Global styles and CSS variables
├── fonts.css          # Font loading and definitions
├── buttons.css        # Button component styles
├── markdown-content.css # MDX content styling
├── tailwind-theme.css  # Tailwind customizations
└── aos.css            # Animation styles
```

#### Design System Tokens
```css
:root {
  /* Brand Colors */
  --color-primary: #3b82f6;
  --color-secondary: #6366f1;
  
  /* Typography */
  --font-sans: 'Inter Variable', sans-serif;
  --font-display: 'Archivo Black', sans-serif;
  
  /* Spacing */
  --space-section: 5rem;
  --space-component: 2rem;
}
```

### Animation System

#### CSS-Based Animations
- **Tailwind Animate**: Pre-built animation utilities
- **Custom Keyframes**: Brand-specific animations
- **Hover Effects**: Interactive state transitions

#### JavaScript Animations
- **Anime.js**: Complex animations and interactions
- **AOS (Animate on Scroll)**: Scroll-triggered animations
- **View Transitions**: Page transition effects

## Data Flow Architecture

### Content Collections Flow

```
Keystatic CMS → MDX Files → Astro Content Collections → Page Generation
     ↓              ↓              ↓                    ↓
  (Editing)    (Storage)      (Validation)        (Static HTML)
```

### Data Processing Pipeline

1. **Content Creation**: Authors create content via Keystatic CMS
2. **File Storage**: Content stored as MDX files with frontmatter
3. **Schema Validation**: Zod schemas validate content structure
4. **Build Processing**: Astro processes collections during build
5. **Static Generation**: Pages generated with optimized assets

### State Management

#### Static State (Build Time)
- **Content Collections**: Blog posts, projects, resume data
- **Configuration**: Site settings, theme configuration
- **Assets**: Images, icons, static files

#### Client State (Runtime)
- **Theme Preference**: Dark/light mode persistence
- **Navigation State**: Mobile menu open/closed
- **Form State**: Contact form validation and submission

## Performance Architecture

### Build Performance

#### Optimization Strategies
- **Incremental Builds**: Only rebuild changed content
- **Asset Optimization**: Automatic image and asset processing
- **Code Splitting**: Automatic JavaScript chunking
- **Tree Shaking**: Unused code elimination

#### Build Pipeline
```
Source Files → TypeScript Compilation → Asset Processing → Static Generation → Optimization
```

### Runtime Performance

#### Loading Strategy
- **Critical CSS**: Above-the-fold styles inlined
- **Progressive Enhancement**: Base experience without JavaScript
- **Lazy Loading**: Images and non-critical components
- **Prefetching**: Next-page preloading

#### Caching Strategy
- **Static Assets**: Long-term browser caching
- **HTML Pages**: CDN caching with revalidation
- **API Responses**: Content API response caching

This architecture documentation provides engineers with a deep understanding of how the Voyager application is structured and how to work within its patterns and conventions.